mp_clean$obs <- NA #Create an empty column
countries <- table(mp_clean$country) #Get the information
for (name in names(countries)) {
value <- as.numeric(countries[name]) #Number of occurences
mp_clean[mp_clean$country == name,'obs'] <- value #Assign these
}
#Weigh
#Weighted OLS
OLS_weighted <- lm(formula = gen_formula, data = mp_clean, weight = (mp_clean$obs*mp_clean$obs)
OLS_weighted
#Weighted OLS
OLS_weighted <- lm(formula = gen_formula, data = mp_clean, weight = (mp_clean$obs*mp_clean$obs))
summary(OLS_weighted)
mp_clean
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe
?nls
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
mp_clean
summary(mp_clean$schooling_years)
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
nls1_c <- coeftest(nls1, vcov = vcovHC(nls1, type = "HC0", cluster = c(mp_clean$country)))
coeftest(nls1)
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
coeftest(nls1)
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 5))
coeftest(nls1)
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 10))
coeftest(nls1)
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
coeftest(nls1)
nls1_c <- coeftest(nls1, vcov = vcovHC(nls1, type = "HC0", cluster = c(mp_clean$country)))
c(mp_clean$country)
vcovHC(nls1, type = "HC0", cluster = c(mp_clean$country))
vcovHC(nls1)
vcovHC()
?vcovHS
?vcovHC
nls.vcov
?nls.vcov
install.packages("remotes")
library(remotes) #nls vcov matrix
?nls.vcov
?remotes
library(remotes) #nls vcov matrix
remotes
summary(mls1)
summary(nls1)
nls1_c <- coeftest(nls1, vcov = vcovHC(summary(nls1), type = "HC0", cluster = c(mp_clean$country)))
test_glm <- glm(formula = qdr_formula, family = gaussian, data = mp_clean)
test_glm
summary(glm)
summary(test_glm)
vcov(nls1)
?vcov
#nls1_c <- coeftest(nls1, vcov = vcovHC(nls1, type = "HC0", cluster = c(mp_clean$country)))
nls1_c <- coeftest(nls1, vcov = vcov(nls1))
nls1_c
nls1
summary(nls1)
#nls1_c <- coeftest(nls1, vcov = vcovHC(nls1, type = "HC0", cluster = c(mp_clean$country)))
nls1_c <- coeftest(nls1, vcov = vcov(nls1, cluster = c(mp_clean$country)))
nls1_c
vcov(nls1, cluster = c(mp_clean$country)
a
a <- vcov(nls1, cluster = c(mp_clean$country)
a
a <- vcov(nls1, cluster = c(mp_clean$country))
a
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
nls1_c <- coeftest(nls1, vcov = vcov(nls1, cluster = c(mp_clean$country)))
setwd("C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis")
#setwd("C:/Users/AU451FE/IES/Diploma-Thesis/P&P (2018) analysis")
data_raw <- read_excel('Data transformed for R.xlsx', sheet = 'Data')
data <- data.frame(data_raw, stringsAsFactors = TRUE) #converting to a data frame
#View(data)
### MP ###
#Remove missing values
relevant_columns <- c('mp_overall', 'schooling_years', 'country',
'year', 'region', 'inc_level')
mp_clean <- data[!is.na(data$mp_overall) & !is.na(data$schooling_years),
relevant_columns]
gen_formula <- 'mp_overall ~ schooling_years'
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
### New methodology ###
nls1 <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
nls1_c <- coeftest(nls1, vcov = vcov(nls1, cluster = c(mp_clean$country)))
OLS_country_se <- lm(formula = gen_formula, data = mp_clean)
library(stargazer) #Pretty output
stargazer(nls1_c)
source('C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis/P&P exploration_ecox project.R')
OLS_country_se_c <- coeftest(OLS_country_se, vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
#A simple OLS without the quadratic term
OLS_country_se <- lm(formula = gen_formula, data = mp_clean)
OLS_country_se_c <- coeftest(OLS_country_se, vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
print(OLS_country_se_c)
?nls
ols_w <- lm(formula = gen_formula, data = mp_clean, weight = (mp_clean$obs*mp_clean$obs))
ols1_w_c <- coeftest(ols_w, vcov = vcov(ols_w, cluster = c(mp_clean$country)))
summary(OLS_weighted)
#A simple OLS without the quadratic term
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(OLS_country_se, vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
#A simple regression with the quadratic term (qdr_formula)
nls <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
#Create a column 'obs' which denotes how many times
#a country appears in the data set
mp_clean$obs <- NA #Create an empty column
#A simple regression with the quadratic term (qdr_formula)
nls <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
setwd("C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis")
#setwd("C:/Users/AU451FE/IES/Diploma-Thesis/P&P (2018) analysis")
data_raw <- read_excel('Data transformed for R.xlsx', sheet = 'Data')
data <- data.frame(data_raw, stringsAsFactors = TRUE) #converting to a data frame
#View(data)
### MP ###
#Remove missing values
relevant_columns <- c('mp_overall', 'schooling_years', 'country',
'year', 'region', 'inc_level')
mp_clean <- data[!is.na(data$mp_overall) & !is.na(data$schooling_years),
relevant_columns]
gen_formula <- 'mp_overall ~ schooling_years'
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
### Replication of methods from the primary study ###
#Figure 1 - rate of return ~ country's year of schooling
#The basic regression should have coefficients 49.611 (intercept) and -0.020 (year)
#Pretty much the same regression as in fig 2, only with data from Annex 1 - not sure if want to use
#Figure 2 - rate of return ~ years of schooling (individual observations)
fig2_reg <- lm(formula = gen_formula, data = mp_clean)
### New methodology ###
#A simple OLS without the quadratic term
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(OLS_country_se, vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
stargazer#(ols_c)
#A simple regression with the quadratic term (qdr_formula)
nls <- nls(formula = qdr_formula, data = mp_clean, start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
#stargazer(nls_c)
#Create a column 'obs' which denotes how many times
#a country appears in the data set
mp_clean$obs <- NA #Create an empty column
countries <- table(mp_clean$country) #Get the information
for (name in names(countries)) {
value <- as.numeric(countries[name]) #Number of occurences
mp_clean[mp_clean$country == name,'obs'] <- value #Assign these
}
summary(NLS_weighted)
ols_w <- lm(formula = gen_formula, data = mp_clean,
weight = (mp_clean$obs*mp_clean$obs))
ols_w_c <- coeftest(ols_w, vcov = vcov(ols_w, cluster = c(mp_clean$country)))
summary(OLS_weighted)
#Weighted NLS
nls_w <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0), weight = (mp_clean$obs*mp_clean$obs))
nls_w_c <- coeftest(nls_w, vcov = vcov(nls_w, cluster = c(mp_clean$country)))
summary(NLS_weighted)
summary(nls_weighted)
summary(nls_w_c)
coef(nls_w_c)
nls_w_c
stargazer(nls_w_c)
stargazer(ols_w_c)
fe <- plm(formula = gen_formula, data = mp_clean, model = "within")
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(FE, type = "fixed", cluster = c(mp_clean$country)))
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(fe, type = "fixed", cluster = c(mp_clean$country)))
fe_c
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(OLS_country_se,
vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
#Simple fixed effects
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(fe, type = "fixed", cluster = c(mp_clean$country)))
#A simple regression with the quadratic term (qdr_formula)
nls <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
stargazer(ols_c, fe_c, nls_c)
?rma
fe_w_c <- coeftest(fe_w, weights = (mp_clean$obs*mp_clean$obs),
vcov = vcov(fe_w, type = "fixed", cluster = c(mp_clean$country)))
fe_w <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
weights = (mp_clean$obs*mp_clean$obs), data = mp_clean, method = "FE")
fe_w_c <- coeftest(fe_w,
vcov = vcov(fe_w, type = "fixed", cluster = c(mp_clean$country)))
fe_w_c
stargazer(ols_w_c, fe_w_c, nls_w_c) #LaTeX table for the weighted models
#The actual regression
instrument <- 1/sqrt(mp_clean$obs) #instrument to be used as weight
iv_formula <- 'mp_overall ~ schooling_years | instrument'
IV_reg <- ivreg(formula = iv_formula, data = mp_clean)
summary(IV_reg, vcov = vcovHC(IV_reg, cluster = c(mp_clean$country)), diagnostics = TRUE) #Diagnostic tests included in the summary
instrument <- 1/sqrt(mp_clean$obs) #instrument to be used as weight
iv_formula <- 'mp_overall ~ schooling_years | instrument'
IV_reg <- ivreg(formula = iv_formula, data = mp_clean)
summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE) #Diagnostic tests included in the summary
########################################################
####### Advanced Econometrics 21/22 WS - project #######
########################################################
### Packages ###
library(readxl)
library(lmtest) #coeftest
library(metafor) #FE/RE
library(AER) #IV regression
library(stargazer) #LaTeX output
#If any of the packages above are not installed on your device,
#simply install them with "install.packages('package_name')"
###########################
### Data pre-processing ###
###########################
setwd('wd_path') #The working directory should contain the source data set
#setwd("C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis")
#Read the data set and convert it to an R data frame
data_raw <- read_excel('Data transformed for R.xlsx', sheet = 'Data')
data <- data.frame(data_raw, stringsAsFactors = TRUE)
#Remove missing values and include only relevant columns
relevant_columns <- c('mp_overall', 'schooling_years', 'country',
'year', 'region', 'inc_level')
mp_clean <- data[!is.na(data$mp_overall) & !is.na(data$schooling_years),
relevant_columns]
#Create a column 'obs' which denotes the number of occurrences in
# the data set for each country
mp_clean$obs <- NA #Create an empty column
countries <- table(mp_clean$country) #Get the information
for (name in names(countries)) {
value <- as.numeric(countries[name]) #Number of occurrences
mp_clean[mp_clean$country == name,'obs'] <- value #Assign these
}
#Useful formulas
gen_formula <- 'mp_overall ~ schooling_years'
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
##################
##### Models #####
##################
### Unweighted models ###
#A simple OLS
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(OLS_country_se,
vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
#Simple Fixed-effects
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(fe, type = "fixed", cluster = c(mp_clean$country)))
#A simple regression with the quadratic term
nls <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
### Weighted models ###
#Weighted OLS
ols_w <- lm(formula = gen_formula, data = mp_clean,
weight = (mp_clean$obs*mp_clean$obs))
ols_w_c <- coeftest(ols_w, vcov = vcov(ols_w, cluster = c(mp_clean$country)))
#Weighted Fixed-effects
fe_w <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
weights = (mp_clean$obs*mp_clean$obs), data = mp_clean, method = "FE")
fe_w_c <- coeftest(fe_w,
vcov = vcov(fe_w, type = "fixed", cluster = c(mp_clean$country)))
#Weighted regression with the quadratic term
nls_w <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0), weight = (mp_clean$obs*mp_clean$obs))
nls_w_c <- coeftest(nls_w, vcov = vcov(nls_w, cluster = c(mp_clean$country)))
stargazer(ols_w_c, fe_w_c, nls_w_c) #LaTeX table for the weighted models
### IV regression ###
instrument <- 1/sqrt(mp_clean$obs) #instrument to be used as weight
iv_formula <- 'mp_overall ~ schooling_years | instrument'
IV_reg <- ivreg(formula = iv_formula, data = mp_clean)
summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE) #Diagnostic tests included in the summary
ols
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
########################################################
####### Advanced Econometrics 21/22 WS - project #######
########################################################
### Packages ###
library(readxl)
library(lmtest) #coeftest
library(metafor) #FE/RE
library(AER) #IV regression
library(stargazer) #LaTeX output
#If any of the packages above are not installed on your device,
#simply install them with "install.packages('package_name')"
###########################
### Data pre-processing ###
###########################
setwd('wd_path') #The working directory should contain the source data set
#setwd("C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis")
#Read the data set and convert it to an R data frame
data_raw <- read_excel('Data transformed for R.xlsx', sheet = 'Data')
data <- data.frame(data_raw, stringsAsFactors = TRUE)
#Remove missing values and include only relevant columns
relevant_columns <- c('mp_overall', 'schooling_years', 'country',
'year', 'region', 'inc_level')
mp_clean <- data[!is.na(data$mp_overall) & !is.na(data$schooling_years),
relevant_columns]
#Create a column 'obs' which denotes the number of occurrences in
# the data set for each country
mp_clean$obs <- NA #Create an empty column
countries <- table(mp_clean$country) #Get the information
for (name in names(countries)) {
value <- as.numeric(countries[name]) #Number of occurrences
mp_clean[mp_clean$country == name,'obs'] <- value #Assign these
}
#Useful formulas
gen_formula <- 'mp_overall ~ schooling_years'
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
##################
##### Models #####
##################
### Unweighted models ###
#A simple OLS
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(OLS_country_se,
vcov = vcov(OLS_country_se, cluster = c(mp_clean$country)))
#Simple Fixed-effects
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(fe, type = "fixed", cluster = c(mp_clean$country)))
#A simple regression with the quadratic term
nls <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
### Weighted models ###
#Weighted OLS
ols_w <- lm(formula = gen_formula, data = mp_clean,
weight = (mp_clean$obs*mp_clean$obs))
ols_w_c <- coeftest(ols_w, vcov = vcov(ols_w, cluster = c(mp_clean$country)))
#Weighted Fixed-effects
fe_w <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
weights = (mp_clean$obs*mp_clean$obs), data = mp_clean, method = "FE")
fe_w_c <- coeftest(fe_w,
vcov = vcov(fe_w, type = "fixed", cluster = c(mp_clean$country)))
#Weighted regression with the quadratic term
nls_w <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0), weight = (mp_clean$obs*mp_clean$obs))
nls_w_c <- coeftest(nls_w, vcov = vcov(nls_w, cluster = c(mp_clean$country)))
stargazer(ols_w_c, fe_w_c, nls_w_c) #LaTeX table for the weighted models
### IV regression ###
instrument <- 1/sqrt(mp_clean$obs) #instrument to be used as weight
iv_formula <- 'mp_overall ~ schooling_years | instrument'
IV_reg <- ivreg(formula = iv_formula, data = mp_clean)
summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE) #Diagnostic tests included in the summary
########################################################
####### Advanced Econometrics 21/22 WS - project #######
########################################################
### Packages ###
library(readxl)
library(lmtest) #coeftest
library(metafor) #FE/RE
library(AER) #IV regression
library(stargazer) #LaTeX output
#If any of the packages above are not installed on your device,
#simply install them with "install.packages('package_name')"
###########################
### Data pre-processing ###
###########################
setwd('wd_path') #The working directory should contain the source data set
#setwd("C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis")
#Read the data set and convert it to an R data frame
data_raw <- read_excel('Data transformed for R.xlsx', sheet = 'Data')
data <- data.frame(data_raw, stringsAsFactors = TRUE)
#Remove missing values and include only relevant columns
relevant_columns <- c('mp_overall', 'schooling_years', 'country',
'year', 'region', 'inc_level')
mp_clean <- data[!is.na(data$mp_overall) & !is.na(data$schooling_years),
relevant_columns]
#Create a column 'obs' which denotes the number of occurrences in
# the data set for each country
mp_clean$obs <- NA #Create an empty column
countries <- table(mp_clean$country) #Get the information
for (name in names(countries)) {
value <- as.numeric(countries[name]) #Number of occurrences
mp_clean[mp_clean$country == name,'obs'] <- value #Assign these
}
#Useful formulas
gen_formula <- 'mp_overall ~ schooling_years'
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
##################
##### Models #####
##################
### Unweighted models ###
#A simple OLS
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(ols, vcov = vcov(ols, cluster = c(mp_clean$country)))
#Simple Fixed-effects
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(fe, type = "fixed", cluster = c(mp_clean$country)))
#A simple regression with the quadratic term
nls <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
### Weighted models ###
#Weighted OLS
ols_w <- lm(formula = gen_formula, data = mp_clean,
weight = (mp_clean$obs*mp_clean$obs))
ols_w_c <- coeftest(ols_w, vcov = vcov(ols_w, cluster = c(mp_clean$country)))
#Weighted Fixed-effects
fe_w <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
weights = (mp_clean$obs*mp_clean$obs), data = mp_clean, method = "FE")
fe_w_c <- coeftest(fe_w,
vcov = vcov(fe_w, type = "fixed", cluster = c(mp_clean$country)))
#Weighted regression with the quadratic term
nls_w <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0), weight = (mp_clean$obs*mp_clean$obs))
nls_w_c <- coeftest(nls_w, vcov = vcov(nls_w, cluster = c(mp_clean$country)))
stargazer(ols_w_c, fe_w_c, nls_w_c) #LaTeX table for the weighted models
### IV regression ###
instrument <- 1/sqrt(mp_clean$obs) #instrument to be used as weight
iv_formula <- 'mp_overall ~ schooling_years | instrument'
IV_reg <- ivreg(formula = iv_formula, data = mp_clean)
summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE) #Diagnostic tests included in the summary
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
ols_c
summary(ols_c)
summary(ols)
ols_c <- coeftest(ols, vcov = vcov(ols, cluster = c(mp_clean$country)))
ols_c
nls_c
nls
#A simple regression with the quadratic term
test <- 'mp_overall ~ 1 + schooling_years + schooling_years^2'
nls <- nls(formula = test, data = mp_clean,
start = list(schooling_years = 0))
nls
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
nls_c
#A simple regression with the quadratic term
nls <- nls(formula = gen_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
?nls
nls_c
summary(nnls_c)
summary(nls_c)
#A simple regression with the quadratic term
nls <- nls(formula = gen_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
stargazer(ols_c, fe_c, nls_c) #LaTeX table for the simple models
nls_c
setwd("C:/Users/hso20/OneDrive/Plocha/IES/Diploma-Thesis/P&P (2018) analysis")
#Read the data set and convert it to an R data frame
data_raw <- read_excel('Data transformed for R.xlsx', sheet = 'Data')
data <- data.frame(data_raw, stringsAsFactors = TRUE)
#Remove missing values and include only relevant columns
relevant_columns <- c('mp_overall', 'schooling_years', 'country',
'year', 'region', 'inc_level')
mp_clean <- data[!is.na(data$mp_overall) & !is.na(data$schooling_years),
relevant_columns]
#Create a column 'obs' which denotes the number of occurrences in
# the data set for each country
mp_clean$obs <- NA #Create an empty column
countries <- table(mp_clean$country) #Get the information
for (name in names(countries)) {
value <- as.numeric(countries[name]) #Number of occurrences
mp_clean[mp_clean$country == name,'obs'] <- value #Assign these
}
#Useful formulas
gen_formula <- 'mp_overall ~ schooling_years'
qdr_formula <- 'mp_overall ~ schooling_years + schooling_years^2'
#A simple OLS
ols <- lm(formula = gen_formula, data = mp_clean)
ols_c <- coeftest(ols, vcov = vcov(ols, cluster = c(mp_clean$country)))
#Simple Fixed-effects
fe <- rma(mp_overall, sei = schooling_years, mods = ~schooling_years,
data = mp_clean, method = "FE")
fe_c <- coeftest(fe,
vcov = vcov(fe, type = "fixed", cluster = c(mp_clean$country)))
#A simple regression with the quadratic term
nls <- nls(formula = gen_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
nls_c
#A simple regression with the quadratic term
nls <- nls(formula = quard_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
#A simple regression with the quadratic term
nls <- nls(formula = qdr_formula, data = mp_clean,
start = list(schooling_years = 0))
nls_c <- coeftest(nls, vcov = vcov(nls, cluster = c(mp_clean$country)))
nls_c
stargazer(ols_w_c, fe_w_c, nls_w_c) #LaTeX table for the weighted models
summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE) #Diagnostic tests included in the summary
?ivreg
stargazer(summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE))
stargazer(summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE))
summary(IV_reg, vcov = vcov(IV_reg, cluster = c(mp_clean$country)),
diagnostics = TRUE) #Diagnostic tests included in the summary
